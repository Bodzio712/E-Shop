<!DOCTYPE HTML>
<html>
<head>
	<meta charset="UTF-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
	<script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/main.js') }}"></script>

<!-- Remember to include jQuery :) -->

<!-- jQuery Modal -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
</head>
<body>
<!-- Navbar z buttonami-->


<div class="white_content"  id="white_content"></div>



    <div class="navbar">

         <!-- Kategorie-->
        <div class="dropdown">
            <button class="dropbtn" >Kategorie
                <i class="fa fa-caret-down"></i>
            </button>
            <div class="dropdown-content" id="myDropdown">
                {% for link in categoryData %}
                <a href="/kategorie?catId={{link[0]}}">{{link[1]}}</a>
                {% endfor %}
            </div>
        </div>

        <!-- Rodzaje-->
        <div class="dropdown">
            <button class="dropbtn">Rodzaje
                <i class="fa fa-caret-down"></i>
            </button>
            <div class="dropdown-content" id="myDropdown">
                {% for link in typeData %}
                <a href="/rodzaje?typeId={{link[0]}}">{{ link.name}}</a>
                {% endfor %}
            </div>
        </div>

        <!-- Producenci-->
        <div class="dropdown">
            <button class="dropbtn">Producenci
                <i class="fa fa-caret-down" ></i>
            </button>
            <div class="dropdown-content" id="myDropdown">
                {% for link in manuData %}
                <a href="/producenci?manuId={{link[0]}}">{{link[1]}}</a>
                {% endfor %}
            </div>
        </div>

		{% if not loggedIn %}
		<div class="dropdown">
		<a class="dropbtn" href="/loginForm">Zaloguj</a>
		</div>

		{% else %}
        <!-- Profil-->
        <div class="dropdown">
            <button class="dropbtn">Profil
                <i class="fa fa-caret-down"></i>
            </button>
            <div class="dropdown-content" id="myDropdown">
                <a href="/account/orders">Zamowienia</a>
                <a href="/logout">Wyloguj</a>
            </div>
        </div>

        <!-- Koszyk-->
        <div id="cartId">
		<a class="link" href="/cart">
			<button class="cartClass">
			    <img src={{url_for('static', filename='photos/cart.png')}} id="cartIcon" />
                <p style="color: white"> {{noOfItems}} </p>
			</button>
		</a>
	    </div>
{% endif %}
    </div>



{% if productData%}
<div class="basket_1">
      <div class="basket-labels">
        <ul>
          <li class="item item-heading">Nazwa</li>
          <li class="price">Cena jedn. brutto</li>
          <li class="quantity">Szczegóły</li>
          <li class="producent">Producent</li>
          <li class="quantity">Ilość</li>
        </ul>
      </div>

    {% for link in productData %}
      <div class="basket-product">
        <div class="item">
          <div class="product-details">
            <h1><strong><span class="item-quantity"> </span> {{link.description}} </strong></h1>
            <p><strong>{{link.productName}} </strong></p>
          </div>
        </div>
        <div class="price">{{link.priceGross}}</div>


        <div class = "quantity" rel="modal:open">
            <a href="#ex1" rel="modal:open" class="button">Szczegóły</a>
            <div id="ex1" class="modal">
                <p>{{ link.description }} </p>
            </div>
        </div>

        <div class="producent">{{link.name}}</div>

        <div class = "quantity">
              <form action="/addToCart?productId={{link.productId}}" method="post" href="/addToCart?productId={{link.productId}}">
                       <td><input type = "number" name = "liczba" min = "0" maxlength="2" size="2"/></td>
                       <input type = "hidden"  value = {{link.productId}} />
                  <div class = "remove">
                       <td><input type="submit" value="Dodaj do koszyka" id="add2cart"/></td>
                  </div>
              </form>
        </div>



      </div>
  		{% endfor %}
</div>
{%  endif %}




{% if products %}
<main>
<div class="basket">
      <div class="basket-labels">
        <ul>
          <li class="item item-heading">Produkt</li>
          <li class="price">Cena jedn. brutto</li>
          <li class="quantity">Ilość szt.</li>
          <li class="subtotal">Suma brutto</li>
        </ul>
      </div>
		{% for link in products %}
      <div class="basket-product">
        <div class="item">
          <div class="product-details">
            <h1><strong><span class="item-quantity">{{link.quantity}} x </span> {{link.productName}} </strong></h1>
            <p><strong>Navy, Size 18</strong></p>
            <p>Product Code - 232321939</p>
          </div>
        </div>

        <div class="price">{{link.priceGross}}</div>
        <div class="quantity">
          <input type="number" value="{{ link.quantity }}" min="1" class="quantity-field">
        </div>
        <div class="subtotal">104.00</div>
        <a class="remove" href="/removeCart?cartId={{link.cartId}}">
          <button>Remove</button>
        </a>
      </div>
  		{% endfor %}
	</div>

	 <aside>
      <div class="summary">
        <div class="summary-total-items"><span class="total-items"></span> Przedmioty w koszyku</div>
        <div class="summary-subtotal">
          <div class="subtotal-title">Subtotal</div>
          <div class="subtotal-value final-value" id="basket-subtotal">130.00</div>
          <div class="summary-promo hide">
            <div class="promo-title">Promotion</div>
            <div class="promo-value final-value" id="basket-promo"></div>
          </div>
        </div>
        <div class="summary-delivery">
          <select name="delivery-collection" class="summary-delivery-selection" form="checkoutform">
			  <option value="0" selected="selected">Wybierz dostawę</option>
              {% for link in deliveryData %}
                  <option value="{{ link.deliveryId }}" >{{ link.deliveryType }}</option>
              {%  endfor %}
          </select>
        </div>
		  <div class="summary-delivery">
          <select name="payment-collection" class="summary-delivery-selection" form="checkoutform">
              <option value="0" selected="selected">Wybierz płatność</option>
             {% for link in paymentData %}
                  <option value="{{ link.paymentId }}" >{{ link.paymentType }}</option>
              {%  endfor %}
          </select>
        </div>
        <div class="summary-total">
          <div class="total-title">Total</div>
          <div class="total-value final-value" id="basket-total">130.00</div>
        </div>
        <div class="summary-checkout">
            <form action="/placeOrder" href="/placeOrder" method="POST" id="checkoutform">
                <input type="submit" value="Zapłać" class="checkout-cta"/>
            </form>
        </div>
      </div>
    </aside>
</main>
{% endif %}

<!--Obsługa wyświetlania zamówionych przedmiotów-->
{% if orders%}
    <div class="basket_1">
    <div class="basket-labels">
        <ul>
          <li class="item item-heading">Nazwa</li>
          <li class="price">Cena jedn. brutto</li>
          <li class="quantity">Ilość</li>
          <li class="delivery">Sposób dostawy</li>
        </ul>
      </div>
        {% for link in orders %}
      <div class="basket-product">
        <div class="item">
          <div class="product-details">
            <p><strong>{{link.productName}} </strong></p>
          </div>
        </div>
        <div class="price">{{link.valueGross}}</div>
        <div class = "quantity">{{ link.quantity }}</div>
        <div class="delivery">{{ link.deliveryType }}</div>
      </div>
  		{% endfor %}

    </div>
{% endif %}


</body>
</html>